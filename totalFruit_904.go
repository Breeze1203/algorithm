package main

/*
Problem Description
ä½ åœ¨ä¸€ä¸ªæœå›­é‡Œï¼Œé¢å‰æœ‰ä¸€æ’æœæ ‘ ğŸŒ³ğŸŒ³ğŸŒ³ğŸŒ³ğŸŒ³ï¼Œæ¯æ£µæ ‘ä¸Šéƒ½é•¿ç€ä¸€ç§æ°´æœ ğŸğŸŠğŸ‡ğŸŒğŸ‰ã€‚
ä½ æœ‰ä¸¤ä¸ªç¯®å­ ğŸ§ºğŸ§ºï¼Œä½†æ¯ä¸ªç¯®å­åªèƒ½è£…ä¸€ç§æ°´æœã€‚
ä½ çš„è§„åˆ™æ˜¯ï¼š
âœ… ä½ å¯ä»¥ä»ä»»ä½•ä¸€æ£µæ ‘å¼€å§‹æ‘˜æ°´æœï¼Œä¸€ç›´å¾€å³èµ° â¡ï¸ã€‚
âœ… æ¯æ£µæ ‘éƒ½å¿…é¡»æ‘˜ä¸€ä¸ªæ°´æœ ğŸğŸŠğŸ‡ã€‚
âœ… æœ€å¤šåªèƒ½è£…ä¸¤ç§æ°´æœï¼Œå¦‚æœé‡åˆ°ç¬¬ä¸‰ç§æ°´æœ ğŸš«ï¼Œå°±å¿…é¡»åœä¸‹ï¼
ä½ çš„ç›®æ ‡ ğŸ¯ï¼š
ğŸ‘‰ çœ‹çœ‹æœ€å¤šèƒ½æ‘˜å¤šå°‘ä¸ªæ°´æœï¼ ğŸğŸŠğŸ‡
ä¸¾ä¸ªä¾‹å­ï¼š
å¦‚æœæœæ ‘æ˜¯ï¼š
[ğŸ, ğŸŠ, ğŸ]
âœ… ä½ å¯ä»¥æ‘˜ å…¨éƒ¨ 3 é¢—æ ‘ï¼Œå› ä¸ºä½ ç¯®å­é‡Œåªè£…äº† ğŸ å’Œ ğŸŠ è¿™ä¸¤ç§æ°´æœã€‚
âœ… ç­”æ¡ˆæ˜¯ 3 ğŸ‰
å¦‚æœæœæ ‘æ˜¯ï¼š
[ğŸŒ, ğŸ, ğŸ‡, ğŸ‡]
å¦‚æœä»ç¬¬ä¸€æ£µæ ‘ï¼ˆğŸŒï¼‰å¼€å§‹ï¼Œä½ èƒ½æ‘˜ [ğŸŒ, ğŸ]ï¼Œåªèƒ½æ‘˜ 2 é¢— âŒ
ä½†å¦‚æœä» ğŸ å¼€å§‹ï¼Œå¯ä»¥æ‘˜ [ğŸ, ğŸ‡, ğŸ‡]ï¼Œä¸€å…± 3 é¢—ï¼ âœ…
âœ… ç­”æ¡ˆæ˜¯ 3 ğŸ‰
å¦‚æœæœæ ‘æ˜¯ï¼š
[ğŸ, ğŸŠ, ğŸ‡, ğŸŠ, ğŸŠ]
ğŸš« ä½ ä¸èƒ½æ‘˜ [ğŸ, ğŸŠ, ğŸ‡, ğŸŠ]ï¼Œå› ä¸ºå‡ºç°äº†ç¬¬ä¸‰ç§æ°´æœ ğŸ‡ï¼
âœ… ä½†æ˜¯ä½ å¯ä»¥ä» ğŸŠ å¼€å§‹ï¼Œæ‘˜ [ğŸŠ, ğŸ‡, ğŸŠ, ğŸŠ]ï¼Œæœ€å¤šæ‘˜ 4 é¢—ï¼
*/
func totalFruit(fruits []int) int {
	n := len(fruits)
	if n == 0 {
		return 0
	}
	// æœ€ç»ˆæ‘˜å–çš„æœå­æ•°
	maxPicked := 0
	left := 0
	basket := make(map[int]int) // ç”¨æ¥å­˜å‚¨å½“å‰çª—å£ä¸­æ°´æœç§ç±»åŠå…¶æ•°é‡ (fruitType -> count)
	for right := 0; right < n; right++ {
		currentFruitType := fruits[right]
		// å°†å½“å‰æ°´æœæ”¾å…¥ç¯®å­ (å¢åŠ å…¶è®¡æ•°)
		basket[currentFruitType]++
		for len(basket) > 2 {
			// å‡å°‘å·¦è¾¹æ°´æœçš„è®¡æ•°
			leftFruitType := fruits[left]
			basket[leftFruitType]--
			if basket[leftFruitType] == 0 {
				// å¦‚æœè¿™ç§æ°´æœæ•°é‡ä¸º0ï¼Œä»ç¯®å­ä¸­ç§»é™¤è¯¥ç§ç±»
				delete(basket, leftFruitType)
			}
			left++
		}
		maxPicked = max(maxPicked, right-left+1)
	}
	return maxPicked
}
